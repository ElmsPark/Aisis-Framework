<?php
	/**
	 *
	 * ==================== [-DO NOT TOUCH!!!-] =======================
	 *
	 *		This file is the PHP editor for Aisis in which it will
	 *		load in the custom/custom-functions.php file and allow you
	 *		to edit the file. If it is not there you will get an
	 *		error message telling you to create one.
	 *		
	 *		@author:  Adam Balan
	 *		@version: 1.0
	 *		@package: AisisCore->AdminPanel->Modules
	 * =================================================================
	 */
	 
?>
        <div class="box">
        	<h1>PHP Editor</h1>
            <p>Looking to edit your custom-functions.php file? Make your changes bellow and hit the save button to see the changes take affect.</p>
        </div>
        <?php 
		if(get_option('did_we_write_to_the_file_php') == 'true'){
			?>
			<div class="success">We have successfully updated your custom-functions.php file in your custom folder.</div>
            <script>
            	$().toastmessage('showSuccessToast', "We have successfully updated your custom-functions.php file in your custom folder. Check out your site to see the new changes.");
            </script>
			<?php
			update_option('did_we_write_to_the_file_php', '');
		}
		
		if(get_option('did_it_fail_to_update_php') == 'true'){
			?>
			<div class="err">Either you tried to save an empty custom-functions.php file or your custom-functions.php file is not writable. Please try again.</div>
            <script>
            	$().toastmessage('showErrorToast', "We do not allow you to save empty php files. Please check that your file is not empty. We also might not be able to write to it because you do not have write access. First check that what yopu are trying to save is not empty.");
            </script>
			<?php
			update_option('did_it_fail_to_update_php', '');
		}
        ?>
    	<div class="notice">Please note that editing this file will over write <strong>ANY</strong> changes you have made to this file. Always make a back up of this file first. 
        If you in any way make any kind of syntax error or any other error you may result in a white screen of death. 
        We advise you back up your <strong>custom/custom-functions.php</strong></div>
		<?php $aisis_forum_url = 'options.php?redirect_to=/wp-admin/admin.php?page=aisis-php-editor' ?>
        <form method="post" action="<?php echo $aisis_forum_url ?>">
          	<?php settings_fields( 'aisis-php-editor' ); ?>
        	<?php do_settings_fields('aisis-php-editor', 'aisis_php_editor_section'); ?>
            <input type="submit" id="published" name="published" value="Save PHP"/>
        </form>