<?php
	/**
	 *
	 * ==================== [DONT TOUCH THIS FILE!] ====================
	 *
	 *		This file is responsible for displaying a single post.
	 *		This is essentially your single.php
	 *
	 *		This file is loaded via the BuildAisisTheme file as
	 *		is loaded into a pluggable. This allows you to over
	 *		ride that function (which loads this file) in your custom
	 *		-functions.php Thus allowing you to change the way this page
	 *		looks by telling the function to load a different phtml file.
	 *
	 *		The same goal can be achieved in over writing this file
	 *		in a child theme or through Aisis Packages.
	 *
	 *		@see AisisCore->Templates->BuildAisisTheme
	 *		
	 *		@author:  Adam Balan
	 *		@version: 1.0
	 *		@package: AisisCore->Templates
	 *
	 * =================================================================
	 */
	 global $more, $post;
	 $more = 0; //declare and set $more before The Loop
	  
	 $options = get_option('aisis_core_theme_setting_sidebar_single');
	 $option_global = get_option('aisis_core_theme_setting_sidebar_global');
	 $options_slider_mini_global = get_option('aisis_core_theme_setting_slider_mini_global');
	 $options_slider_mini = get_option('aisis_core_theme_setting_slider_mini_single');
	 $options_recent_posts = get_option('aisis_display_related_posts_setting');
	 $options_cat_tags = get_option('aisis_display_categories_tags_setting');
	  
	 $aisis_category_list_options = array(
			 'orderby' => 'name',
			 'style' => 'none',
			 'title_li'=> '',
	 );	
	 
	if($options_slider_mini_global['no_slider_mini_global'] != 1 && $options_slider_mini['no_slider_mini_single'] != 1){
		aisis_header();
	}	 
	
	if(is_sticky()){
?>
	
    <div id="<?php if($options['no_sidebar_single'] != 1 && $option_global['no_sidebar_global'] != 1){ echo 'sticky'; }else{ echo 'stickyFull'; }?>">
    	<?php while(have_posts()) : the_post();?>
        <article class="post clearfix">
    
            <header>
                <h1 class="postTitle"><?php the_title(); ?></h1>
                <div class="postComments"><?php comments_number('0', '1', '%'); ?> comments</div>
                <div class="whoWrote">Author of this post: <a href="<?php echo get_author_posts_url(get_the_author_meta( 'ID' )); ?>"><?php the_author_meta('display_name'); ?></a></div>
                <div class="dateWrote"><?php the_time('F, jS, Y'); ?></div>
            </header>
            <?php if(has_post_thumbnail()){?>
                <figure class="soft-embossed postImage">
                    <?php the_post_thumbnail();?>
                </figure>
            <?php } ?>
            <p> <?php the_content(); ?></p>
        </article>
        <?php
			endwhile; 
		  	wp_reset_query(); 
		?>
        <!-- /.post -->
    <?php if($options_cat_tags['cat_tags'] != 1){?>
        <div class="listCategories">Categories: <?php wp_list_categories($aisis_category_list_options);?></div> 
        <div class="listTags"><?php the_tags();?></div> 
    <?php } ?>  
    </div>
    
    <?php
	}else{
	?>
    <div id="<?php if($options['no_sidebar_single'] != 1 && $option_global['no_sidebar_global'] != 1){ echo 'content'; }else{ echo 'contentFull'; }?>">
    	<?php while(have_posts()) : the_post();?>
        <article class="post clearfix">
    
            <header>
                <h1 class="postTitle"><?php the_title(); ?></h1>
                <div class="postComments"><?php comments_number('0', '1', '%'); ?> comments</div>
                <div class="whoWrote">Author of this post: <a href="<?php echo get_author_posts_url(get_the_author_meta( 'ID' )); ?>"><?php the_author_meta('display_name'); ?></a></div>
                <div class="dateWrote"><?php the_time('F, jS, Y'); ?></div>
            </header>
            <?php if(has_post_thumbnail()){?>
                <figure class="soft-embossed post-image">
                    <?php the_post_thumbnail();?>
                </figure>
            <?php } ?>
            <p> <?php the_content(); ?></p>
        </article>
        <?php
			endwhile; 
		  	wp_reset_query(); 
		?>
        <!-- /.post -->
    <?php if($options_cat_tags['cat_tags'] != 1){?>
        <div class="listCategories">Categories: <?php wp_list_categories($aisis_category_list_options);?></div> 
        <div class="listTags"><?php the_tags();?></div> 
    <?php } ?>  
    </div>
    
    <?php
	}
	if($options['no_sidebar_single'] != 1 && $option_global['no_sidebar_global'] != 1){
		get_sidebar();
	}

    if('open' == $post->comment_status){
	    comments_template('', true);
    }
	aisis_footer();
	?>